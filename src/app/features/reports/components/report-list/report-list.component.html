<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4 mt-3">
  <h2 class="h3 mb-0">報告書 一覧</h2>

  <div class="d-flex align-items-center">
    <label for="monthSelect" class="me-2 mb-0">表示月:</label>
    <select
      id="monthSelect"
      class="form-select w-auto"
      [(ngModel)]="selectedMonth"
    >
      <option *ngFor="let month of reportMonthList" [value]="month">
        {{ formatDate(month, "month") }}
      </option>
    </select>
  </div>
</div>


  <div *ngIf="reports.length > 0; else noReports">
    <table class="table table-responsive table-striped table-hover w-100">
      <thead>
        <tr>
          <th>氏名</th>
          <th>日付</th>
          <th>提出期日</th>
          <th>提出日</th>
          <th>所属</th>
          <th>完了</th>
          <th>承認</th>
          <th>コメント</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let report of filteredReports">
          <td class="align-middle">{{ report.employeeName }}</td>
          <td class="align-middle">
            {{ formatDate(report.reportMonth, "month") }}
          </td>
          <td class="align-middle">
            {{ formatDate(report.reportDeadline, "date") }}
          </td>
          <td class="align-middle">
            <ng-container *ngIf="report.submittedAt; else noSubmitted">
              {{ report.submittedAt | date : "yyyy/MM/dd" }}
            </ng-container>
            <ng-template #noSubmitted>
              <svg
                width="28"
                height="22"
                fill="currentColor"
                class="bi bi-dash-lg"
                viewBox="-9 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"
                />
              </svg>
            </ng-template>
          </td>
          <td class="align-middle">{{ report.departmentName }}</td>
          <td class="align-middle">
            <svg
              *ngIf="report.completeFlg"
              width="32"
              height="24"
              fill="green"
              class="bi bi-check-circle-fill"
              viewBox="0 0 16 16"
            >
              <path
                d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"
              />
            </svg>
            <svg
              *ngIf="!report.completeFlg"
              width="22"
              height="22"
              fill="currentColor"
              class="bi bi-dash-lg"
              viewBox="-7 0 16 16"
            >
              <path
                fill-rule="evenodd"
                d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"
              />
            </svg>
          </td>
          <td class="align-middle">
            <ng-container [ngSwitch]="report.approvalFlg">
              <svg
                *ngSwitchCase="true"
                width="25"
                height="25"
                fill="#1E90FF"
                class="bi bi-emoji-smile-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5M4.285 9.567a.5.5 0 0 1 .683.183A3.5 3.5 0 0 0 8 11.5a3.5 3.5 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683M10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8"
                />
              </svg>
              <svg
                *ngSwitchCase="false"
                width="25"
                height="25"
                fill="red"
                class="bi bi-emoji-dizzy-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16M4.146 5.146a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 1 1 .708.708l-.647.646.647.646a.5.5 0 1 1-.708.708L5.5 7.207l-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708m5 0a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708.708l-.647.646.647.646a.5.5 0 1 1-.708.708l-.646-.647-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708M8 13a2 2 0 1 1 0-4 2 2 0 0 1 0 4"
                />
              </svg>
              <svg
                *ngSwitchDefault
                width="22"
                height="22"
                fill="currentColor"
                class="bi bi-dash-lg"
                viewBox="-7 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"
                />
              </svg>
            </ng-container>
          </td>
          <td class="align-middle">
            <svg
              *ngIf="report.comment"
              width="45"
              height="24"
              fill="#28a745"
              class="bi bi-chat-dots"
              viewBox="0 0 10 15"
            >
              <path
                d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"
              />
              <path
                d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125z"
              />
            </svg>
            <svg
              *ngIf="!report.comment"
              width="32"
              height="22"
              fill="currentColor"
              class="bi bi-dash-lg"
              viewBox="-10 0 16 16"
            >
              <path
                fill-rule="evenodd"
                d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"
              />
            </svg>
          </td>
          <td class="align-middle">
            <a
              [routerLink]="['/reports', report.id]"
              class="btn btn-detail-custom"
            >
              <svg
                width="22"
                height="22"
                fill="currentColor"
                class="bi bi-file-earmark-text"
                viewBox="1 0 16 16"
              >
                <path
                  d="M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"
                />
                <path
                  d="M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"
                />
              </svg>
              詳細
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <ng-template #noReports>
    <p>データが存在しません。</p>
  </ng-template>
</div>
